/**
 * @fileoverview Dia 04 - Revis√£o TypeScript & Iniciando Angular
 * @description Quiz de revis√£o + prepara√ß√£o para Angular
 *
 * üìã INSTRU√á√ïES:
 * 1. Complete os exerc√≠cios marcados com "// TODO:"
 * 2. Consulte o arquivo "exercicios.md" para as instru√ß√µes detalhadas
 * 3. Execute este arquivo com:
 *    üöÄ F√ÅCIL: npm run exemplos:dia04 (na raiz do projeto)
 *    üîß MANUAL: cd docs/semana-01/dia-04 && npx ts-node exemplos.ts
 * 4. Use o arquivo "README.md" como refer√™ncia te√≥rica
 */

/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable @typescript-eslint/no-explicit-any */

// =============================================================================
// üìù SE√á√ÉO 1: QUIZ DE REVIS√ÉO TYPESCRIPT
// =============================================================================

console.log('üéØ === QUIZ DE REVIS√ÉO TYPESCRIPT ===');

// TODO 1: Interface para perguntas do quiz
interface PerguntaQuiz {
  // TODO: Definir estrutura da pergunta
  id: number; // üîß Substitua 'any' pelo tipo correto (number)
  pergunta: string; // üîß Substitua 'any' pelo tipo correto (string)
  opcoes: string[]; // üîß Array de strings
  respostaCorreta: number; // üîß √çndice da resposta correta (number)
  explicacao: string; // üîß Explica√ß√£o da resposta (string)
  categoria: 'tipos' | 'classes' | 'generics' | 'utility-types'; // üîß Union type: 'tipos' | 'classes' | 'generics' | 'utility-types'
}

// TODO 2: Exemplos de perguntas do quiz
const perguntasRevisao: PerguntaQuiz[] = [
  {
    id: 1,
    pergunta: "Qual a diferen√ßa entre 'any' e 'unknown' em TypeScript?",
    opcoes: [
      'N√£o h√° diferen√ßa',
      'unknown √© type-safe e requer verifica√ß√£o',
      'any √© mais r√°pido',
      'unknown √© deprecated',
    ],
    respostaCorreta: 1,
    explicacao:
      "'unknown' √© type-safe e requer verifica√ß√£o de tipo antes do uso, enquanto 'any' desabilita completamente a verifica√ß√£o de tipos.",
    categoria: 'tipos',
  },
  {
    id: 2,
    pergunta: 'Qual a fun√ß√£o de Required<T>?',
    opcoes: [
      'constr√≥i um tipo apenas com as propriedades obrigat√≥rias de T',
      'faz com que as propiedades obrigat√≥rias de T se tornem opcionais',
      'cria um tipo igual a T mas com todas as propriedades sendo obrigat√≥rias',
      'transforma as propriedades de T em somente leitura',
    ],
    respostaCorreta: 2,
    explicacao:
      "'Required' constr√≥i um novo tipo com as mesmas propriedades do tipo T fornecido, mas todas elas s√£o obrigat√≥rias.",
    categoria: 'utility-types',
  },
  {
    id: 3,
    pergunta: 'Qual a utilidade da palavra super em uma classe?',
    opcoes: [
      'acessar a classe pai',
      'subscrever m√©todos da classe pai',
      'priorizar a execu√ß√£o de m√©todos da classe filho sobre os m√©todos da classe pai',
      'nenhuma das anteriores',
    ],
    respostaCorreta: 0,
    explicacao:
      'A palavra-chave super √© utilizada sempre que √© necess√°rio acessar a classe pai de uma classe.',
    categoria: 'classes',
  },
  // TODO: Adicione mais perguntas sobre:
  // - Interfaces vs Types
  // - Classes e heran√ßa
  // - Generics
  // - Utility Types (Partial, Pick, Omit)
];

// TODO 3: Classe para gerenciar o quiz
class GerenciadorQuiz {
  private pontuacao = 0;
  private perguntaAtual = 0;
  private respostasUsuario: number[] = [];

  constructor(private perguntas: PerguntaQuiz[]) {}

  // TODO: Implementar m√©todo para obter pergunta atual
  obterPerguntaAtual(): PerguntaQuiz | null {
    return perguntasRevisao[this.perguntaAtual]; // placeholder
  }

  // TODO: Implementar m√©todo para responder pergunta
  responderPergunta(resposta: number): boolean {
    // TODO: Verificar se resposta est√° correta
    // TODO: Atualizar pontua√ß√£o
    // TODO: Armazenar resposta do usu√°rio
    // TODO: Avan√ßar para pr√≥xima pergunta
    const pergunta = perguntasRevisao[this.perguntaAtual];
    this.respostasUsuario.push(resposta);
    this.perguntaAtual++;
    if (pergunta.respostaCorreta === resposta) {
      this.pontuacao++;
      return true;
    } else {
      return false;
    }
  }

  // TODO: Implementar m√©todo para calcular resultado
  obterResultadoFinal(): { pontos: number; percentual: number; nivel: string } {
    // TODO: Calcular percentual de acertos
    // TODO: Determinar n√≠vel (Iniciante, Intermedi√°rio, Avan√ßado, Expert)
    const percentual = (this.pontuacao / this.respostasUsuario.length) * 100;
    let nivel: string = '';
    if (percentual <= 25) nivel = 'Iniciante';
    if (percentual <= 50) nivel = 'Intermedi√°rio';
    if (percentual <= 75) nivel = 'Avan√ßado';
    if (percentual > 75) nivel = 'Expert';

    return { pontos: this.pontuacao, percentual: percentual, nivel }; // placeholder
  }

  // TODO: Implementar m√©todo para reiniciar quiz
  reiniciarQuiz(): void {
    this.pontuacao = 0;
    this.perguntaAtual = 0;
    this.respostasUsuario = [];
  }
}

// =============================================================================
// üîÑ SE√á√ÉO 2: REVIS√ÉO DOS CONCEITOS (DIAS 1-3)
// =============================================================================

// Revis√£o Dia 01 - Tipos B√°sicos
// TODO 4: Complete os tipos b√°sicos
interface JogadorInfo {
  id: number; // üîß number
  nome: string; // üîß string/
  nivel: number; // üîß number
  ativo: boolean; // üîß boolean
  habilidades: string[]; // üîß string[]
  posicao: [number, number]; // üîß [number, number] (tupla)
}

// TODO 5: Enum para tipos de dados
enum TipoDado {
  STRING = 'STRING',
  NUMBER = 'NUMBER',
  BOOLEAN = 'BOOLEAN',
  ARRAY = 'ARRAY',
  OBJECT = 'OBJECT',
}
// TODO: Adicionar tipos: STRING, NUMBER, BOOLEAN, ARRAY, OBJECT

// Revis√£o Dia 02 - Classes e OOP
// TODO 6: Classe base com heran√ßa
class PersonagemBase {
  // TODO: Implementar constructor com propriedades p√∫blicas/privadas
  // TODO: Implementar getter/setter
  // TODO: Implementar m√©todo virtual
  protected hitPoints: number;
  nome: string;
  ataque: number;
  defesa: number;

  constructor(nome: string) {
    this.hitPoints = 50;
    this.nome = nome;
    this.ataque = 10;
    this.defesa = 5;
  }

  get getHitPoints(): number {
    return this.hitPoints;
  }

  set recuperarHitPoints(cura: number) {
    this.hitPoints += cura;
  }

  set tomarDano(dano: number) {
    this.hitPoints -= dano;
  }

  subirDeNivel(): void {
    this.hitPoints = 80;
    this.ataque = 20;
    this.defesa = 10;
  }
}

class Guerreiro extends PersonagemBase {
  // TODO: Implementar heran√ßa
  // TODO: Override de m√©todos
  // TODO: Propriedades espec√≠ficas
  reducaoDeDano: number;

  constructor(nome: string) {
    super(nome);
    this.reducaoDeDano = 0.9;
  }

  subirDeNivel(): void {
    this.hitPoints = 100;
    this.ataque = 30;
    this.defesa = 15;
    this.reducaoDeDano = 0.8;
  }

  set tomarDano(dano: number) {
    this.hitPoints -= dano * this.reducaoDeDano;
  }
}

// Revis√£o Dia 03 - Generics e Utility Types
// TODO 7: Fun√ß√£o gen√©rica
function criarColecao<T>(item: T): T[] {
  return [item];
}

// TODO 8: Utility Types Review
interface Usuario {
  id: number;
  nome: string;
  email: string;
  senha: string;
  dataNascimento: Date;
}

// TODO: Implementar utility types
type UsuarioSemSenha = Omit<Usuario, 'senha'>; // üîß Use Omit<Usuario, 'senha'>
type UsuarioOpcional = Partial<Usuario>; // üîß Use Partial<Usuario>
type ApenasIdENome = Pick<Usuario, 'id' | 'nome'>; // üîß Use Pick<Usuario, 'id' | 'nome'>

// =============================================================================
// ÔøΩ SE√á√ÉO 3: PREPARA√á√ÉO PARA ANGULAR
// =============================================================================

// TODO 9: Simular estrutura de um componente Angular (sem decorators)
interface ComponenteAngular {
  // TODO: Propriedades que um componente Angular teria
  template: string;
  estilos: string[];
  dados: any;

  // TODO: M√©todos do ciclo de vida
  ngOnInit(): void;
  ngOnDestroy(): void;
}

// TODO 10: Implementar simula√ß√£o de componente
type DadosQuiz = {
  titulo: string;
  perguntaAtual: number | null;
  pontuacao: number;
};

class QuizComponenteSimulado implements ComponenteAngular {
  // TODO: Implementar propriedades
  template = `
    <div class="quiz-container">
      <h1>Quiz TypeScript</h1>
      <!-- TODO: Template do quiz -->
    </div>
  `;

  estilos = ['.quiz-container { padding: 20px; }', '.h1 {font-size 18px}'];

  dados: DadosQuiz = {
    titulo: 'Quiz de Revis√£o TypeScript',
    perguntaAtual: null,
    pontuacao: 0,
  };

  // TODO: Implementar ngOnInit
  ngOnInit(): void {
    console.log('Componente inicializado!');
    this.dados = {
      titulo: 'O que corre de p√© e dorme deitado',
      perguntaAtual: 0,
      pontuacao: 0,
    };
  }

  // TODO: Implementar ngOnDestroy
  ngOnDestroy(): void {
    console.log('Componente destru√≠do!');
    this.dados = {
      titulo: 'Quiz de Revisao TypeScript',
      perguntaAtual: null,
      pontuacao: 0,
    };
  }

  // TODO: Simular event binding
  onRespostaClick(resposta: number): void {
    if (resposta > 1) this.dados.pontuacao += 1;
    if (this.dados.perguntaAtual !== null) this.dados.perguntaAtual += 1;
  }

  // TODO: Simular property binding
  get perguntaTexto(): string {
    // TODO: Retornar texto da pergunta atual
    return this.dados.titulo;
  }
}

// =============================================================================
// üß™ SE√á√ÉO 4: TESTES E SIMULA√á√ïES
// =============================================================================

// TODO 11: Fun√ß√£o principal para testar tudo
function executarTestes(): void {
  console.log('üß™ === EXECUTANDO TESTES ===');
  console.log('');

  // TODO: Testar o quiz
  console.log('üìù Testando Quiz...');
  console.log('üéØ Pergunta exemplo do quiz:');
  if (perguntasRevisao.length > 0) {
    const pergunta = perguntasRevisao[0];
    console.log(`   ${pergunta.pergunta}`);
    pergunta.opcoes.forEach((opcao: any, index: any) => {
      console.log(`   ${index + 1}. ${opcao}`);
    });
    console.log(`   ‚úÖ Resposta correta: ${pergunta.opcoes[pergunta.respostaCorreta]}`);
    console.log(`   üí° Explica√ß√£o: ${pergunta.explicacao}`);
  }
  console.log('   üöß TODO: Implemente a interface PerguntaQuiz primeiro!');
  console.log('');

  // TODO: Testar conceitos revisados
  console.log('üîÑ Testando Revis√£o...');
  console.log('üìö Conceitos TypeScript revisados:');
  console.log('   ‚úÖ Tipos B√°sicos (string, number, boolean, arrays, tuplas)');
  console.log('   ‚úÖ Classes e Heran√ßa (OOP)');
  console.log('   ‚úÖ Generics (<T>)');
  console.log('   ‚úÖ Utility Types (Partial, Pick, Omit, Readonly)');
  console.log('');

  // TODO: Testar simula√ß√£o Angular
  console.log('üöÄ Testando Simula√ß√£o Angular...');
  console.log('üèóÔ∏è Simulando componente Angular:');
  const componenteSimulado = new QuizComponenteSimulado();
  componenteSimulado.ngOnInit();
  console.log(
    `   üìÑ Template: ${componenteSimulado.template.substring(0, 50)}...`
  );
  console.log(`   üé® Estilos: ${componenteSimulado.estilos.length} regras CSS`);
  console.log(`   üìä Dados: ${componenteSimulado.dados.titulo}`);
  componenteSimulado.ngOnDestroy();
  console.log('');

  console.log('‚úÖ Todos os testes conclu√≠dos!');
  console.log('');
  console.log('üéØ PR√ìXIMO PASSO: Execute os exerc√≠cios pr√°ticos!');
  console.log('üìã Veja o arquivo "exercicios.md" para instru√ß√µes detalhadas');
  console.log(
    'üöÄ Configure seu primeiro projeto Angular com: ng new meu-projeto'
  );
}

// =============================================================================
// üéØ SE√á√ÉO 5: CHECKLIST PARA ANGULAR
// =============================================================================

/*
üìã CHECKLIST PARA COME√áAR COM ANGULAR:

üõ†Ô∏è Prepara√ß√£o do Ambiente:
[ ] Node.js instalado (vers√£o 16+)
[ ] npm ou yarn funcionando
[ ] Angular CLI instalado globalmente: npm install -g @angular/cli
[ ] Verificar instala√ß√£o: ng version

üèóÔ∏è Cria√ß√£o do Projeto:
[ ] ng new quiz-typescript --routing=true --style=css
[ ] cd quiz-typescript
[ ] ng serve
[ ] Acessar http://localhost:4200

üìÅ Explora√ß√£o da Estrutura:
[ ] Analisar src/app/app.component.ts
[ ] Entender src/app/app.module.ts
[ ] Explorar src/main.ts
[ ] Examinar angular.json

üß© Primeiro Componente:
[ ] ng generate component quiz-typescript
[ ] Implementar template b√°sico
[ ] Adicionar l√≥gica do quiz
[ ] Conectar com dados TypeScript

üîó Data Binding:
[ ] Interpola√ß√£o: {{ }}
[ ] Property Binding: [property]
[ ] Event Binding: (event)
[ ] Two-way Binding: [(ngModel)]

üìä Diferen√ßas TypeScript vs Angular:
[ ] Decorators (@Component, @Injectable)
[ ] Dependency Injection
[ ] Templates HTML separados
[ ] Ciclo de vida espec√≠fico
[ ] Modules e lazy loading
*/

// =============================================================================
// üìö NOTAS DE APRENDIZADO
// =============================================================================

/*
üìù PRINCIPAIS DIFEREN√áAS TS ‚Üí ANGULAR:

1. üèóÔ∏è ESTRUTURA:
   TypeScript Puro:
   - Classes simples
   - Fun√ß√µes diretas
   - Import/Export b√°sico

   Angular:
   - Decorators (@Component)
   - Dependency Injection
   - Modules (NgModule)

2. üé® TEMPLATES:
   TypeScript Puro:
   - Manipula√ß√£o direta do DOM
   - innerHTML strings

   Angular:
   - Templates HTML declarativos
   - Data binding autom√°tico
   - Directives (*ngFor, *ngIf)

3. üîÑ CICLO DE VIDA:
   TypeScript Puro:
   - Constructor simples
   - Cleanup manual

   Angular:
   - ngOnInit, ngOnDestroy
   - Hooks espec√≠ficos
   - Gerenciamento autom√°tico

4. üì¶ ORGANIZA√á√ÉO:
   TypeScript Puro:
   - Arquivos .ts
   - Imports ES6

   Angular:
   - Componentes (.ts + .html + .css)
   - Services injet√°veis
   - Modules organizacionais
*/
console.log('üéØ === INICIANDO TESTES ===');
// üî• Descomente para executar os testes:
executarTestes();

export {
  PerguntaQuiz,
  GerenciadorQuiz,
  QuizComponenteSimulado,
  JogadorInfo,
  PersonagemBase,
  Guerreiro,
};
